#!/usr/bin/env ruby

def usage
  puts "Usage: moss [options] <file 1> <file 2>"
  puts "-h Print usage info"
  exit 0
end

def main
  usage if ARGV == ['-h'] || ARGV.length != 2

  output = `git diff #{ if $stdout.isatty then "--color-words" else "" end } --no-index #{ARGV.join ' '}`

  puts output
end

begin
  main
rescue Interrupt
  nil
end
